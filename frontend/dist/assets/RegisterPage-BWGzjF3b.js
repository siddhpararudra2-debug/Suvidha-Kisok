import{a as O,b as B,r as f,j as e,B as o,C as F,I as N,T as p,H as E,e as c,A as k,f as y,E as H,L,W as R,g as b,h as M,i as $}from"./index-CvTgMGVT.js";import{A as V}from"./ArrowBack-oJs9L-pj.js";import{m as S}from"./proxy-DrJgCC2U.js";import{C as G,a as Y}from"./CardContent-CIXAKCCO.js";import{S as K,a as U,b as q}from"./Stepper-AjzsTige.js";import{G as t}from"./Grid2-BCjMZ-MG.js";import{T as r,F as J,I as Q,S as Z}from"./TextField-1yT12K-S.js";import{I as l}from"./InputAdornment-BTlcd4Cr.js";import{P as _}from"./Person-C9n9QFSi.js";import{P as ee}from"./Phone-Bu2LTRrI.js";import{E as se}from"./Email-5hRZn4Yd.js";import{F as ie,L as te}from"./Lock-CC8nzgX3.js";import{M as h}from"./MenuItem-CiF18mED.js";import{C as ae}from"./Check-b6dkFJ5p.js";import"./useFormControl-DYI7Ix0L.js";const ye=()=>{const v=O(),x=B(),[j,g]=f.useState(0),[m,u]=f.useState(!1),[w,C]=f.useState(!1),[s,I]=f.useState({fullName:"",mobile:"",email:"",aadhaar:"",otp:"",address:"",city:"Mumbai",pincode:"",electricityId:"",gasId:"",waterId:""}),A=["Personal Details","Verify Mobile","Link Connections"],a=i=>d=>{let n=d.target.value;i==="mobile"?n=n.replace(/\D/g,"").slice(0,10):i==="aadhaar"?n=n.replace(/\D/g,"").slice(0,12).replace(/(\d{4})(?=\d)/g,"$1 "):i==="pincode"?n=n.replace(/\D/g,"").slice(0,6):i==="otp"&&(n=n.replace(/\D/g,"").slice(0,6)),I(P=>({...P,[i]:n}))},W=async()=>{if(s.mobile.length!==10){x(b({message:"Please enter valid mobile number",severity:"error"}));return}u(!0),await new Promise(i=>setTimeout(i,1500)),u(!1),C(!0),x(b({message:"OTP sent to your mobile",severity:"success"}))},X=async()=>{if(s.otp.length!==6){x(b({message:"Please enter 6-digit OTP",severity:"error"}));return}u(!0),await new Promise(i=>setTimeout(i,1e3)),u(!1),g(2)},D=async()=>{u(!0),x(M()),await new Promise(d=>setTimeout(d,2e3));const i={};s.electricityId&&(i.electricity=[s.electricityId]),s.gasId&&(i.gas=[s.gasId]),s.waterId&&(i.water=[s.waterId]),x($({user:{id:`USR${Date.now()}`,name:s.fullName,mobile:`+91-${s.mobile}`,email:s.email,aadhaarMasked:s.aadhaar?`XXXX-XXXX-${s.aadhaar.slice(-4)}`:void 0,address:`${s.address}, ${s.city} - ${s.pincode}`,connections:i},token:"new-user-token",refreshToken:"new-refresh-token",expiresIn:900})),u(!1),x(b({message:"Registration successful! Welcome to SUVIDHA",severity:"success"})),v("/dashboard")},z=s.fullName.length>=2&&s.mobile.length===10,T=s.otp.length===6;return e.jsx(o,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #34a853 0%, #1e8e3e 100%)",py:4},children:e.jsxs(F,{maxWidth:"md",children:[e.jsx(N,{onClick:()=>v("/login"),sx:{mb:2,backgroundColor:"white",boxShadow:1},children:e.jsx(V,{})}),e.jsx(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(o,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"50%",background:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",mb:2},children:e.jsx(p,{variant:"h3",sx:{color:"success.main",fontWeight:700},children:"S"})}),e.jsx(p,{variant:"h4",sx:{fontWeight:700,color:"white"},children:"Create Your Account"}),e.jsx(p,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",mt:1},children:"Register to access all civic services"})]})}),e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:e.jsx(G,{elevation:8,sx:{borderRadius:4},children:e.jsxs(Y,{sx:{p:4},children:[e.jsx(K,{activeStep:j,sx:{mb:4},children:A.map((i,d)=>e.jsx(U,{completed:j>d,children:e.jsx(q,{children:i})},i))}),j===0&&e.jsxs(o,{children:[e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Full Name",value:s.fullName,onChange:a("fullName"),InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(_,{color:"primary"})})}})}),e.jsx(t,{size:{xs:12,sm:6},children:e.jsx(r,{fullWidth:!0,label:"Mobile Number",value:s.mobile,onChange:a("mobile"),placeholder:"10-digit mobile",InputProps:{startAdornment:e.jsxs(l,{position:"start",children:[e.jsx(ee,{color:"primary"}),e.jsx(p,{sx:{ml:.5},children:"+91"})]})}})}),e.jsx(t,{size:{xs:12,sm:6},children:e.jsx(r,{fullWidth:!0,label:"Email (Optional)",type:"email",value:s.email,onChange:a("email"),InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(se,{color:"primary"})})}})}),e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Aadhaar Number (Optional but recommended)",value:s.aadhaar,onChange:a("aadhaar"),placeholder:"XXXX XXXX XXXX",InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(ie,{color:"primary"})})},helperText:"Link Aadhaar for faster verification"})}),e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Address",value:s.address,onChange:a("address"),multiline:!0,rows:2,InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(E,{color:"primary"})})}})}),e.jsx(t,{size:{xs:12,sm:6},children:e.jsxs(J,{fullWidth:!0,children:[e.jsx(Q,{children:"City"}),e.jsxs(Z,{value:s.city,label:"City",onChange:i=>I(d=>({...d,city:i.target.value})),children:[e.jsx(h,{value:"Mumbai",children:"Mumbai"}),e.jsx(h,{value:"Delhi",children:"Delhi"}),e.jsx(h,{value:"Bangalore",children:"Bangalore"}),e.jsx(h,{value:"Chennai",children:"Chennai"}),e.jsx(h,{value:"Kolkata",children:"Kolkata"}),e.jsx(h,{value:"Pune",children:"Pune"}),e.jsx(h,{value:"Ahmedabad",children:"Ahmedabad"})]})]})}),e.jsx(t,{size:{xs:12,sm:6},children:e.jsx(r,{fullWidth:!0,label:"Pincode",value:s.pincode,onChange:a("pincode"),placeholder:"6-digit pincode"})})]}),e.jsx(c,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>g(1),disabled:!z,sx:{mt:4,minHeight:56},children:"Continue"})]}),j===1&&e.jsxs(o,{children:[e.jsxs(k,{severity:"info",sx:{mb:3},children:["We'll send an OTP to verify your mobile number: ",e.jsxs("strong",{children:["+91-",s.mobile]})]}),w?e.jsxs(e.Fragment,{children:[e.jsx(r,{fullWidth:!0,label:"Enter 6-digit OTP",value:s.otp,onChange:a("otp"),placeholder:"------",InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(te,{color:"primary"})})},sx:{mb:3}}),e.jsxs(o,{sx:{display:"flex",gap:2},children:[e.jsx(c,{variant:"outlined",onClick:()=>C(!1),sx:{flex:1,minHeight:48},children:"Resend OTP"}),e.jsx(c,{variant:"contained",onClick:X,disabled:!T||m,sx:{flex:2,minHeight:48},children:m?e.jsx(y,{size:24}):"Verify & Continue"})]})]}):e.jsx(c,{fullWidth:!0,variant:"contained",size:"large",onClick:W,disabled:m,sx:{minHeight:56},children:m?e.jsx(y,{size:24}):"Send OTP"}),e.jsx(c,{fullWidth:!0,variant:"text",onClick:()=>g(0),sx:{mt:2},children:"â† Back to Details"})]}),j===2&&e.jsxs(o,{children:[e.jsxs(k,{severity:"success",sx:{mb:3},children:[e.jsx(ae,{sx:{mr:1}})," Mobile verified successfully!"]}),e.jsx(p,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Link Your Existing Connections (Optional)"}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"You can add these later from your dashboard"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Electricity Consumer ID",value:s.electricityId,onChange:a("electricityId"),InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(H,{sx:{color:"#fbbc04"}})})},placeholder:"Found on your electricity bill"})}),e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Gas BP Number",value:s.gasId,onChange:a("gasId"),InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(L,{sx:{color:"#ea4335"}})})},placeholder:"Found on your gas bill"})}),e.jsx(t,{size:{xs:12},children:e.jsx(r,{fullWidth:!0,label:"Water Connection ID",value:s.waterId,onChange:a("waterId"),InputProps:{startAdornment:e.jsx(l,{position:"start",children:e.jsx(R,{sx:{color:"#1a73e8"}})})},placeholder:"Found on your water bill"})})]}),e.jsxs(o,{sx:{display:"flex",gap:2,mt:4},children:[e.jsx(c,{variant:"outlined",onClick:()=>g(1),sx:{flex:1,minHeight:48},children:"Back"}),e.jsx(c,{variant:"contained",color:"success",onClick:D,disabled:m,sx:{flex:2,minHeight:56},children:m?e.jsx(y,{size:24}):"Complete Registration"})]})]})]})})})]})})};export{ye as default};
//# sourceMappingURL=RegisterPage-BWGzjF3b.js.map
